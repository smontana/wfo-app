extends ./views/layout.jade

block title
  title WFO Data Viewer

block content

  div.pane.sections-pane

    section#homepage_sec.app-section
      .page-rows
        h1.text-center HOMEPAGE
        span.vert-space

    section#attendance_sec.app-section
      .page-rows
        h1.text-center ATTENDANCE
        span.vert-space

        .row.attendance-first-row.flexbox-container

          .gauge-row-flexbox
            span.hint--always(aria-label="Sales and F&I")
            //- F&I
            .attendance-card
              .content
                h3.text-center.gauge-title
                  = 'Absent Count | 2016 YTD'
                #attendance_sfi_abs_cnt_gauge

            .attendance-card
              .content
                h3.text-center.gauge-title
                  = 'Late Count | 2016 YTD'
                #attendance_sfi_late_cnt_gauge

            .attendance-card
              .content
                h3.text-center.gauge-title
                  = 'Left-Early Count | 2016 YTD'
                #attendance_sfi_early_cnt_gauge

            script.
              var config = require('./db/config')
              var sql = require('seriate')
              sql.setDefaultConfig(config)

              var query_attendance = require('./db/query_logic/query-attendance.js')
              var sfi_attendance_js = require('./db/sections/attendance/attendance-sfi.js')

              window.onload = sql.execute({
                query: query_attendance.get_attendance_solution_counts_by_yr
              }).then(function(data) {
                console.log(data);
                sfi_attendance_js.build_solution_absence_counts_by_yr_graph(data)
                sfi_attendance_js.build_solution_late_counts_by_yr_graph(data)
                sfi_attendance_js.build_solution_early_counts_by_yr_graph(data)
              }, function(err) {
                console.log(err);
              });

        .row.attendance-second-row.flexbox-container

          .gauge-row-flexbox
            span.hint--always(aria-label="DMS")
            //- DMS
            .attendance-card
              .content
                h3.text-center.gauge-title
                  = 'Absent Count | 2016 YTD'
                #attendance_dms_abs_cnt_gauge

            .attendance-card
              .content
                h3.text-center.gauge-title
                  = 'Late Count | 2016 YTD'
                #attendance_dms_late_cnt_gauge

            .attendance-card
              .content
                h3.text-center.gauge-title
                  = 'Left-Early Count | 2016 YTD'
                #attendance_dms_early_cnt_gauge

            script.
              var config = require('./db/config')
              var sql = require('seriate')
              sql.setDefaultConfig(config)

              var query_attendance = require('./db/query_logic/query-attendance.js')
              var dms_attendance_js = require('./db/sections/attendance/attendance-dms.js');

              window.onload = sql.execute({
                query: query_attendance.get_attendance_solution_counts_by_yr
              }).then(function(data) {
                console.log(data);
                dms_attendance_js.build_solution_absence_counts_by_yr_graph(data)
                dms_attendance_js.build_solution_late_counts_by_yr_graph(data)
                dms_attendance_js.build_solution_early_counts_by_yr_graph(data)
              }, function(err) {
                console.log(err);
              });

        .row.attendance-third-row.flexbox-container

          .gauge-row-flexbox
            span.hint--always(aria-label="RTS")
            //- RTS
            .attendance-card
              .content
                h3.text-center.gauge-title
                  = 'Absent Count | 2016 YTD'
                #attendance_rts_abs_cnt_gauge

            .attendance-card
              .content
                h3.text-center.gauge-title
                  = 'Late Count | 2016 YTD'
                #attendance_rts_late_cnt_gauge

            .attendance-card
              .content
                h3.text-center.gauge-title
                  = 'Left-Early Count | 2016 YTD'
                #attendance_rts_early_cnt_gauge

            script.
              var config = require('./db/config')
              var sql = require('seriate')
              sql.setDefaultConfig(config)

              var query_attendance = require('./db/query_logic/query-attendance.js')
              var rts_attendance_js = require('./db/sections/attendance/attendance-rts.js');

              window.onload = sql.execute({
                query: query_attendance.get_attendance_solution_counts_by_yr
              }).then(function(data) {
                console.log(data);
                rts_attendance_js.build_solution_absence_counts_by_yr_graph(data)
                rts_attendance_js.build_solution_late_counts_by_yr_graph(data)
                rts_attendance_js.build_solution_early_counts_by_yr_graph(data)
              }, function(err) {
                console.log(err);
              });

        .row.attendance-fourth-row.flexbox-container

          .gauge-row-flexbox
            span.hint--always(aria-label="CRM")
            //- RTS
            .attendance-card
              .content
                h3.text-center.gauge-title
                  = 'Absent Count | 2016 YTD'
                #attendance_crm_abs_cnt_gauge

            .attendance-card
              .content
                h3.text-center.gauge-title
                  = 'Late Count | 2016 YTD'
                #attendance_crm_late_cnt_gauge

            .attendance-card
              .content
                h3.text-center.gauge-title
                  = 'Left-Early Count | 2016 YTD'
                #attendance_crm_early_cnt_gauge

            script.
              var config = require('./db/config')
              var sql = require('seriate')
              sql.setDefaultConfig(config)

              var query_attendance = require('./db/query_logic/query-attendance.js')
              var crm_attendance_js = require('./db/sections/attendance/attendance-crm.js');

              window.onload = sql.execute({
                query: query_attendance.get_attendance_solution_counts_by_yr
              }).then(function(data) {
                console.log(data);
                crm_attendance_js.build_solution_absence_counts_by_yr_graph(data)
                crm_attendance_js.build_solution_late_counts_by_yr_graph(data)
                crm_attendance_js.build_solution_early_counts_by_yr_graph(data)
              }, function(err) {
                console.log(err);
              });

    section#interactions_sec.app-section
      .page-rows
        h1.text-center INTERACTIONS
        span.vert-space

        .row.homepage-first-row
          .card
            .content
              #homepage-first-report

        .row.homepage-second-row
          .card
            .content
              #homepage-second-report

        script.
          var config = require('./db/config')
          var sql = require('seriate')
          sql.setDefaultConfig(config)

          var query_interactions = require('./db/query_logic/query-interactions.js')
          var sfi_interactions_js = require('./db/sections/interactions/interactions-sfi.js')

          window.onload = sql.execute({
            query: query_interactions.call_metrics_by_solution_by_week
          }).then(function(data) {
            console.log(data);
            sfi_interactions_js.build_homepage_calls_ans_vs_off_graph(data)
            sfi_interactions_js.build_homepage_calls_abd_flow_tran_graph(data)
          }, function(err) {
            console.log(err);
          });

    section#productivity_sec.app-section
      .page-rows
        h1.text-center PRODUCTIVITY
        span.vert-space

    section#qpa_sec.app-section
      .page-rows
        h1 QPA

        button#print-pdf.print-qpa-page Print PDF
        span#pdf-path

        span.vert-space
        a.hint--top.hint--always(aria-label="Year-to-Date QPA Averages by Solution")

        .row.qpa-first-row.flexbox-container

          .qpa.gauge-row-flexbox

            .qpa-card
              .content
                h3.text-center.gauge-title
                  = 'CD'
                #cd_qpa_yr_avg_gauge

            .qpa-card
              .content
                h3.text-center.gauge-title
                  = 'CRM'
                #crm_qpa_yr_avg_gauge

            .qpa-card
              .content
                h3.text-center.gauge-title
                  = 'CSO (Billing)'
                #cso_qpa_yr_avg_gauge

            .qpa-card
              .content
                h3.text-center.gauge-title
                  = 'DMS'
                #dms_qpa_yr_avg_gauge

            .qpa-card
              .content
                h3.text-center.gauge-title
                  = 'F&I'
                #fi_qpa_yr_avg_gauge

            .qpa-card
              .content
                h3.text-center.gauge-title
                  = 'RTS'
                #rts_qpa_yr_avg_gauge

        script.
          require('./renderer-process/qpa/pdf')
          var config = require('./db/config')
          var sql = require('seriate')
          sql.setDefaultConfig(config)

          var query_qpa = require('./db/query_logic/query-qpa.js')
          var yearly_qpa_avgs = require('./db/sections/qpa/qpa-yearly-avg-gauges.js');

          window.onload = sql.execute({
            query: query_qpa.get_QPA_solution_avg_by_yr
          }).then(function(data) {
            console.log(data);
            yearly_qpa_avgs.build_solution_yearly_avg_graphs(data)
          }, function(err) {
            console.log(err);
          });
