mixin get_qpa_custom_dates_solution_report(placeholder)

  section#qpa_choose_dates_solution_sec.app-section
    .page-rows
      h1.text-center QPA - All Solutions | Custom Date Range
      span.vert-space

      .qpa-date-selection-container
        form#qpa_solution_pick_custom_dates_form(name="qpa_solution_pick_custom_dates_form")
          .form-group

            .qpa-date-selection.qpa-start-date-selection
              label(for='qpa_solution_start_date')
              ='Start Date   '
              input(type="text" name="qpa_solution_start_date_input" id="qpa_solution_start_date" placeholder="Start Date" class="datepicker" data-value="")

            .qpa-date-selection.qpa-end-date-selection
              label(for='qpa_solution_end_date')
              ='End Date   '
              input(type="text" name="qpa_solution_end_date_input" id="qpa_solution_end_date" placeholder="End Date" class="datepicker" data-value="")

          .form-submit
            button#qpa_solution_cutom_dates_form_submit.btn.btn-large.btn-primary(type="submit")
              | Submit

      .qpa-custom-dates-solution-report
          .gauge-row-flexbox

            .qpa-card
              .content
                h3.text-center.gauge-title
                  = 'CD'
                #cd_qpa_custom_range_avg_gauge

            .qpa-card
              .content
                h3.text-center.gauge-title
                  = 'CRM'
                #crm_qpa_custom_range_avg_gauge

            .qpa-card
              .content
                h3.text-center.gauge-title
                  = 'CSO (Billing)'
                #cso_qpa_custom_range_avg_gauge

            .qpa-card
              .content
                h3.text-center.gauge-title
                  = 'DMS'
                #dms_qpa_custom_range_avg_gauge

            .qpa-card
              .content
                h3.text-center.gauge-title
                  = 'F&I'
                #fi_qpa_custom_range_avg_gauge

            .qpa-card
              .content
                h3.text-center.gauge-title
                  = 'RTS'
                #rts_qpa_custom_range_avg_gauge

    script.
      window.$ = window.jQuery = require('jquery');
      var query_qpa = require('./main-process/db/queries/qpa_queries.js');
      var custom_qpa_solution_avg_graphs = require('./main-process/db/graph_builders/qpa/qpa_all_solutions_custom_range_graphs.js');

      $(document).ready(function(event){

        $('.datepicker').pickadate({
          format: 'mm/dd/yyyy',
          formatSubmit: 'yyyy-mm-dd',
          hiddenName: true,
          min: new Date(2016,0,1),
          max: new Date()
        });

        $('form').submit(function (e) {
          e.preventDefault();
          console.log('e :' + e);

          var start_date_value = document.forms.qpa_solution_pick_custom_dates_form.elements.qpa_solution_start_date_input.value;
          var end_date_value = document.forms.qpa_solution_pick_custom_dates_form.elements.qpa_solution_end_date_input.value;
          var constructed_query = query_qpa.get_overall_QPA_solution_avg_between_dates + ' ' + "'" + start_date_value + "'" + ', ' + "'" + end_date_value + "'";

          console.log('StartDate: ' + start_date_value);
          console.log('EndDate: ' + end_date_value);
          console.log('ConstructedQuery: ' + constructed_query);

          show_custom_qpa_solution_report(constructed_query)
        });

        function show_custom_qpa_solution_report(query) {
          var config = require('./main-process/db/config');
          var sql = require('seriate');
          sql.setDefaultConfig(config);

          sql.execute({
            query: query
          }).then(function(data) {
            //- console.log(data);
            custom_qpa_solution_avg_graphs.build_custom_range_solution_avgs_graphs(data)
          }, function(err) {
            console.log(err);
          });
        }
      });
